(()=>{var e={};e.id=7618,e.ids=[7618],e.modules={60:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(18962).A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15904:(e,s,t)=>{Promise.resolve().then(t.bind(t,18416))},18416:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var r=t(60687),a=t(43210),i=t(59756),n=t(10136),l=t(12294),c=t(66520),o=t(60),d=t(22737),x=t(58559),m=t(78122),h=t(31158),p=t(23928),u=t(41312),j=t(25541),v=t(18962);let g=(0,v.A)("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),f=(0,v.A)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var y=t(10022),N=t(74808);function b(){let[e,s]=(0,a.useState)({totalRevenue:0,totalTransactions:0,totalUsers:0,totalCreators:0,averageTransactionAmount:0,successRate:0,revenueGrowth:0,userGrowth:0,transactionGrowth:0}),[t,v]=(0,a.useState)([]),[b,w]=(0,a.useState)([]),[k,A]=(0,a.useState)([]),[z,R]=(0,a.useState)([]),[T,C]=(0,a.useState)(!0),[U,S]=(0,a.useState)(""),[_,P]=(0,a.useState)("30"),[D,$]=(0,a.useState)("overview"),G=(0,a.useCallback)(async()=>{try{C(!0),S("");let e=localStorage.getItem("token"),t=new URLSearchParams({days:_,type:D}),r=await fetch(`/api/v1/admin/reports?${t.toString()}`,{headers:{Authorization:`Bearer ${e}`}}),a=await r.json();a.success?(s(a.data.stats),v(a.data.revenueData||[]),w(a.data.topCreators||[]),A(a.data.topDonors||[]),R(a.data.transactionTrends||[]),S("")):S(a.error||"Failed to load reports")}catch(e){S("Failed to load reports")}finally{C(!1)}},[_,D]),Z=async e=>{try{let s=new URLSearchParams({days:_,type:e,format:"csv"}),t=localStorage.getItem("token"),r=await fetch(`/api/v1/admin/reports/export?${s.toString()}`,{headers:{Authorization:`Bearer ${t}`}});if(r.ok){let s=await r.blob(),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`${e}-report-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)}}catch(e){}},L=e=>e>0?(0,r.jsx)(o.A,{className:"h-4 w-4 text-green-600"}):e<0?(0,r.jsx)(d.A,{className:"h-4 w-4 text-red-600"}):(0,r.jsx)(x.A,{className:"h-4 w-4 text-gray-600"}),M=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600";return T&&0===t.length?(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-600"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading reports..."})]})}):(0,r.jsx)(i.U,{activeTab:"reports",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics & Reports"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Comprehensive platform analytics and performance metrics"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsxs)(l.$,{onClick:G,variant:"outline",disabled:T,children:[(0,r.jsx)(m.A,{className:`mr-2 h-4 w-4 ${T?"animate-spin":""}`}),"Refresh"]}),(0,r.jsxs)(l.$,{onClick:()=>Z("overview"),variant:"outline",children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,r.jsx)(n.Zp,{className:"mb-6",children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsx)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Date Range"}),(0,r.jsxs)("select",{value:_,onChange:e=>P(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"7",children:"Last 7 days"}),(0,r.jsx)("option",{value:"30",children:"Last 30 days"}),(0,r.jsx)("option",{value:"90",children:"Last 90 days"}),(0,r.jsx)("option",{value:"365",children:"Last year"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Report Type"}),(0,r.jsxs)("select",{value:D,onChange:e=>$(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,r.jsx)("option",{value:"overview",children:"Overview"}),(0,r.jsx)("option",{value:"revenue",children:"Revenue"}),(0,r.jsx)("option",{value:"users",children:"Users"}),(0,r.jsx)("option",{value:"transactions",children:"Transactions"}),(0,r.jsx)("option",{value:"creators",children:"Creators"})]})]})]})})})}),U&&(0,r.jsx)(n.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,r.jsx)(n.Wu,{className:"p-4",children:(0,r.jsx)("p",{className:"text-red-600",children:U})})}),(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,c.vv)(e.totalRevenue)}),(0,r.jsxs)("div",{className:`mt-2 flex items-center text-sm ${M(e.revenueGrowth)}`,children:[L(e.revenueGrowth),(0,r.jsxs)("span",{className:"ml-1",children:[Math.abs(e.revenueGrowth).toFixed(1),"%"]})]})]}),(0,r.jsx)(p.A,{className:"h-10 w-10 text-green-600"})]})})}),(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalTransactions.toLocaleString()}),(0,r.jsxs)("div",{className:`mt-2 flex items-center text-sm ${M(e.transactionGrowth)}`,children:[L(e.transactionGrowth),(0,r.jsxs)("span",{className:"ml-1",children:[Math.abs(e.transactionGrowth).toFixed(1),"%"]})]})]}),(0,r.jsx)(x.A,{className:"h-10 w-10 text-blue-600"})]})})}),(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalUsers.toLocaleString()}),(0,r.jsxs)("div",{className:`mt-2 flex items-center text-sm ${M(e.userGrowth)}`,children:[L(e.userGrowth),(0,r.jsxs)("span",{className:"ml-1",children:[Math.abs(e.userGrowth).toFixed(1),"%"]})]})]}),(0,r.jsx)(u.A,{className:"h-10 w-10 text-purple-600"})]})})}),(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.successRate.toFixed(1),"%"]}),(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Avg: ",(0,c.vv)(e.averageTransactionAmount)]})]}),(0,r.jsx)(j.A,{className:"h-10 w-10 text-orange-600"})]})})})]}),(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsxs)(n.ZB,{className:"flex items-center",children:[(0,r.jsx)(g,{className:"mr-2 h-5 w-5"}),"Revenue Trend"]}),(0,r.jsx)(n.BT,{children:"Daily revenue over the selected period"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("div",{className:"flex h-64 items-center justify-center rounded-lg bg-gray-50",children:t.length>0?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("div",{className:"mb-4 text-sm text-gray-600",children:"Revenue by Day"}),t.slice(-7).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,r.jsx)("span",{className:"text-sm",children:(0,c.Yq)(e.date)}),(0,r.jsx)("span",{className:"font-semibold",children:(0,c.vv)(e.revenue)})]},s))]}):(0,r.jsx)("p",{className:"text-gray-500",children:"No revenue data available"})})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsxs)(n.ZB,{className:"flex items-center",children:[(0,r.jsx)(f,{className:"mr-2 h-5 w-5"}),"Transaction Status"]}),(0,r.jsx)(n.BT,{children:"Breakdown of transaction statuses"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsx)("div",{className:"space-y-4",children:z.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:`mr-3 h-3 w-3 rounded-full ${"completed"===e.status?"bg-green-500":"pending"===e.status?"bg-yellow-500":"failed"===e.status?"bg-red-500":"bg-gray-500"}`}),(0,r.jsx)("span",{className:"text-sm font-medium capitalize",children:e.status})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-sm font-semibold",children:e.count}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},s))})})]})]}),(0,r.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Top Creators"}),(0,r.jsx)(n.BT,{children:"Highest earning creators this period"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[b.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-3 flex h-8 w-8 items-center justify-center rounded-full bg-indigo-100",children:(0,r.jsx)("span",{className:"text-sm font-bold text-indigo-600",children:s+1})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-semibold",children:(0,c.vv)(e.total_earnings)}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.donation_count," donations"]})]})]},e.id)),0===b.length&&(0,r.jsx)("p",{className:"py-4 text-center text-gray-500",children:"No creator data available"})]})})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Top Donors"}),(0,r.jsx)(n.BT,{children:"Most generous supporters this period"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[k.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"mr-3 flex h-8 w-8 items-center justify-center rounded-full bg-green-100",children:(0,r.jsx)("span",{className:"text-sm font-bold text-green-600",children:s+1})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("p",{className:"font-semibold",children:(0,c.vv)(e.total_donations)}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[e.donation_count," donations"]})]})]},e.id)),0===k.length&&(0,r.jsx)("p",{className:"py-4 text-center text-gray-500",children:"No donor data available"})]})})]})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Export Reports"}),(0,r.jsx)(n.BT,{children:"Download detailed reports in various formats"})]}),(0,r.jsx)(n.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)(l.$,{onClick:()=>Z("revenue"),variant:"outline",className:"flex items-center justify-center",children:[(0,r.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Revenue Report"]}),(0,r.jsxs)(l.$,{onClick:()=>Z("users"),variant:"outline",className:"flex items-center justify-center",children:[(0,r.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"User Report"]}),(0,r.jsxs)(l.$,{onClick:()=>Z("transactions"),variant:"outline",className:"flex items-center justify-center",children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Transaction Report"]}),(0,r.jsxs)(l.$,{onClick:()=>Z("creators"),variant:"outline",className:"flex items-center justify-center",children:[(0,r.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Creator Report"]})]})})]})]})})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22737:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(18962).A)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]])},25541:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(18962).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31158:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(18962).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},33873:e=>{"use strict";e.exports=require("path")},52929:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/reports/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/reports/page.tsx","default")},58559:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(18962).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66520:(e,s,t)=>{"use strict";t.d(s,{Yq:()=>a,vv:()=>r});let r=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),a=e=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))},70045:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>d,routeModule:()=>m,tree:()=>o});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);t.d(s,c);let o={children:["",{children:["admin",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,52929)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/reports/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,52608)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,99766)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,82366)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,d=["/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/reports/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/reports/page",pathname:"/admin/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},86528:(e,s,t)=>{Promise.resolve().then(t.bind(t,52929))}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[4447,5868,3564,4537],()=>t(70045));module.exports=r})();