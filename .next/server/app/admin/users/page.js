(()=>{var e={};e.id=8733,e.ids=[8733],e.modules={203:(e,s,t)=>{Promise.resolve().then(t.bind(t,24934))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5779:(e,s,t)=>{Promise.resolve().then(t.bind(t,21250))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13861:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21250:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/users/page.tsx","default")},23689:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},24934:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(60687),r=t(43210),l=t(59756),i=t(10136),n=t(12294),c=t(48444),d=t(66520),o=t(41312),x=t(18962);let m=(0,x.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var u=t(40228),h=t(99891),p=t(99270),g=t(23689),j=t(83281),y=t(13861);let f=(0,x.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var v=t(91356);function N(){let[e,s]=(0,r.useState)([]),[t,x]=(0,r.useState)({totalUsers:0,verifiedUsers:0,newUsersToday:0,activeUsers:0}),[N,b]=(0,r.useState)(!0),[k,w]=(0,r.useState)(""),[z,A]=(0,r.useState)(""),[S,U]=(0,r.useState)("all"),[_,C]=(0,r.useState)("all"),[P,$]=(0,r.useState)([]),[q,T]=(0,r.useState)({page:1,limit:20,total:0,totalPages:0});(0,r.useCallback)(async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/v1/admin/users/stats",{headers:{Authorization:`Bearer ${e}`}}),t=await s.json();t.success&&x(t.data)}catch(e){}},[]);let I=(0,r.useCallback)(async()=>{try{b(!0),w("");let e=new URLSearchParams({page:q.page.toString(),limit:q.limit.toString()});z&&e.append("search",z),"all"!==S&&e.append("role",S),"all"!==_&&e.append("status",_);let t=localStorage.getItem("token"),a=await fetch(`/api/v1/admin/users?${e.toString()}`,{headers:{Authorization:`Bearer ${t}`}}),r=await a.json();r.success?(s(r.data),T(r.pagination),w("")):w(r.error||"Failed to load users")}catch(e){w("Failed to load users")}finally{b(!1)}},[q.page,q.limit,z,S,_]),L=async(e,s,t)=>{try{let a=localStorage.getItem("token"),r=await fetch(`/api/v1/admin/users/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({action:s,value:t})}),l=await r.json();l.success?I():w(l.error||"Action failed")}catch(e){w("Action failed")}},M=async e=>{if(0!==P.length)try{let s=localStorage.getItem("token"),t=await fetch("/api/v1/admin/users/bulk",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({userIds:P,action:e})}),a=await t.json();a.success?($([]),I()):w(a.error||"Bulk action failed")}catch(e){w("Bulk action failed")}},B=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},Z=e=>e?"text-green-600":"text-yellow-600";return N&&0===e.length?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading users..."})]})}):(0,a.jsx)(l.U,{activeTab:"users",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage all platform users and their permissions"})]}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-4",children:[(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(o.A,{className:"h-10 w-10 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.totalUsers.toLocaleString()})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(m,{className:"h-10 w-10 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Verified Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.verifiedUsers.toLocaleString()})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.A,{className:"h-10 w-10 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"New Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.newUsersToday.toLocaleString()})]})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.A,{className:"h-10 w-10 text-indigo-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t.activeUsers.toLocaleString()})]})]})})})]}),(0,a.jsx)(i.Zp,{className:"mb-6",children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,a.jsx)(c.p,{placeholder:"Search users...",value:z,onChange:e=>A(e.target.value),className:"w-64 pl-10"})]}),(0,a.jsxs)("select",{value:S,onChange:e=>U(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"all",children:"All Roles"}),(0,a.jsx)("option",{value:"user",children:"Users"}),(0,a.jsx)("option",{value:"admin",children:"Admins"}),(0,a.jsx)("option",{value:"super_admin",children:"Super Admins"})]}),(0,a.jsxs)("select",{value:_,onChange:e=>C(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"all",children:"All Status"}),(0,a.jsx)("option",{value:"verified",children:"Verified"}),(0,a.jsx)("option",{value:"unverified",children:"Unverified"})]})]}),P.length>0&&(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(n.$,{onClick:()=>M("verify"),variant:"outline",size:"sm",children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Verify Selected"]}),(0,a.jsxs)(n.$,{onClick:()=>M("unverify"),variant:"outline",size:"sm",children:[(0,a.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Unverify Selected"]})]})]})})}),k&&(0,a.jsx)(i.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsx)("p",{className:"text-red-600",children:k})})}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{children:["All Users (",q.total,")"]}),(0,a.jsxs)(i.BT,{children:["Showing ",e.length," of ",q.total," users"]})]}),(0,a.jsxs)(i.Wu,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"p-4 text-left",children:(0,a.jsx)("input",{type:"checkbox",checked:P.length===e.length&&e.length>0,onChange:s=>{s.target.checked?$(e.map(e=>e.id)):$([])},className:"rounded border-gray-300"})}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"User"}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Role"}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Status"}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Balance"}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Last Login"}),(0,a.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:e.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("input",{type:"checkbox",checked:P.includes(e.id),onChange:s=>{s.target.checked?$([...P,e.id]):$(P.filter(s=>s!==e.id))},className:"rounded border-gray-300"})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{src:e.avatar||"/default-avatar.png",alt:e.full_name,className:"mr-3 h-10 w-10 rounded-full"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${B(e.role)}`,children:e.role.replace("_"," ").toUpperCase()})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center",children:[e.is_verified?(0,a.jsx)(g.A,{className:`mr-1 h-4 w-4 ${Z(!0)}`}):(0,a.jsx)(j.A,{className:`mr-1 h-4 w-4 ${Z(!1)}`}),(0,a.jsx)("span",{className:Z(e.is_verified),children:e.is_verified?"Verified":"Unverified"})]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"text-sm",children:[(0,a.jsx)("p",{className:"font-medium",children:(0,d.vv)(e.balance)}),(0,a.jsxs)("p",{className:"text-gray-500",children:["Earned: ",(0,d.vv)(e.total_earnings)]})]})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsx)("div",{className:"text-sm",children:e.last_login?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:(0,d.Yq)(e.last_login)}),(0,a.jsx)("p",{className:"text-gray-500",children:new Date(e.last_login).toLocaleTimeString()})]}):(0,a.jsx)("span",{className:"text-gray-500",children:"Never"})})}),(0,a.jsx)("td",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>window.open(`/profile/${e.username}`,"_blank"),children:(0,a.jsx)(y.A,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{size:"sm",variant:"outline",onClick:()=>L(e.id,"toggle_verification"),children:e.is_verified?(0,a.jsx)(f,{className:"h-4 w-4"}):(0,a.jsx)(m,{className:"h-4 w-4"})}),(0,a.jsx)(n.$,{size:"sm",variant:"outline",children:(0,a.jsx)(v.A,{className:"h-4 w-4"})})]})})]},e.id))})]})}),q.totalPages>1&&(0,a.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",q.page," of ",q.totalPages]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(n.$,{variant:"outline",disabled:q.page<=1,onClick:()=>T(e=>({...e,page:e.page-1})),children:"Previous"}),(0,a.jsx)(n.$,{variant:"outline",disabled:q.page>=q.totalPages,onClick:()=>T(e=>({...e,page:e.page+1})),children:"Next"})]})]})]})]})]})})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40228:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},48444:(e,s,t)=>{"use strict";t.d(s,{p:()=>l});var a=t(60687);t(43210);var r=t(98297);let l=({label:e,error:s,fullWidth:t=!1,className:l,...i})=>(0,a.jsxs)("div",{className:(0,r.cn)("flex flex-col space-y-1",t&&"w-full"),children:[e&&(0,a.jsx)("label",{className:"text-sm font-medium text-foreground",children:e}),(0,a.jsx)("input",{className:(0,r.cn)("input",s&&"border-destructive",t&&"w-full",l),...i}),s&&(0,a.jsx)("span",{className:"text-sm text-destructive",children:s})]})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66520:(e,s,t)=>{"use strict";t.d(s,{Yq:()=>r,vv:()=>a});let a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),r=e=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))},69829:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>d});var a=t(65239),r=t(48088),l=t(88170),i=t.n(l),n=t(30893),c={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let d={children:["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,21250)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/users/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,52608)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/error.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,99766)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,82366)),"/Users/erico/socialbuzz/my-socialbuzz-clone/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/erico/socialbuzz/my-socialbuzz-clone/app/admin/users/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},83281:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},91356:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},99270:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(18962).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[4447,5868,3564,4537],()=>t(69829));module.exports=a})();