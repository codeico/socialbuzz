(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7618],{1177:(e,s,t)=>{"use strict";t.d(s,{Yq:()=>r,vv:()=>a});let a=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),r=e=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))},1788:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},3109:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},3904:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},3914:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),r=t(2115),l=t(6050),i=t(1202),n=t(4912),c=t(1177),d=t(4870),o=t(8515),x=t(9397),m=t(3904),h=t(1788),j=t(5868),u=t(7580),p=t(3109),v=t(2895);let g=(0,v.A)("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),N=(0,v.A)("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);var y=t(7434),f=t(4576);function b(){let[e,s]=(0,r.useState)({totalRevenue:0,totalTransactions:0,totalUsers:0,totalCreators:0,averageTransactionAmount:0,successRate:0,revenueGrowth:0,userGrowth:0,transactionGrowth:0}),[t,v]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[k,A]=(0,r.useState)([]),[R,T]=(0,r.useState)([]),[C,S]=(0,r.useState)(!0),[D,L]=(0,r.useState)(""),[M,Z]=(0,r.useState)("30"),[U,B]=(0,r.useState)("overview"),G=(0,r.useCallback)(async()=>{try{S(!0),L("");let e=localStorage.getItem("token"),t=new URLSearchParams({days:M,type:U}),a=await fetch("/api/v1/admin/reports?".concat(t.toString()),{headers:{Authorization:"Bearer ".concat(e)}}),r=await a.json();r.success?(s(r.data.stats),v(r.data.revenueData||[]),w(r.data.topCreators||[]),A(r.data.topDonors||[]),T(r.data.transactionTrends||[]),L("")):L(r.error||"Failed to load reports")}catch(e){L("Failed to load reports")}finally{S(!1)}},[M,U]);(0,r.useEffect)(()=>{G()},[G]);let _=async e=>{try{let s=new URLSearchParams({days:M,type:e,format:"csv"}),t=localStorage.getItem("token"),a=await fetch("/api/v1/admin/reports/export?".concat(s.toString()),{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){let s=await a.blob(),t=window.URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download="".concat(e,"-report-").concat(new Date().toISOString().split("T")[0],".csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(t)}}catch(e){}},F=e=>e>0?(0,a.jsx)(d.A,{className:"h-4 w-4 text-green-600"}):e<0?(0,a.jsx)(o.A,{className:"h-4 w-4 text-red-600"}):(0,a.jsx)(x.A,{className:"h-4 w-4 text-gray-600"}),W=e=>e>0?"text-green-600":e<0?"text-red-600":"text-gray-600";return C&&0===t.length?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-600"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading reports..."})]})}):(0,a.jsx)(l.U,{activeTab:"reports",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics & Reports"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Comprehensive platform analytics and performance metrics"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(n.$,{onClick:G,variant:"outline",disabled:C,children:[(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4 ".concat(C?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(n.$,{onClick:()=>_("overview"),variant:"outline",children:[(0,a.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Export"]})]})]})}),(0,a.jsx)(i.Zp,{className:"mb-6",children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsx)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Date Range"}),(0,a.jsxs)("select",{value:M,onChange:e=>Z(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"7",children:"Last 7 days"}),(0,a.jsx)("option",{value:"30",children:"Last 30 days"}),(0,a.jsx)("option",{value:"90",children:"Last 90 days"}),(0,a.jsx)("option",{value:"365",children:"Last year"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Report Type"}),(0,a.jsxs)("select",{value:U,onChange:e=>B(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,a.jsx)("option",{value:"overview",children:"Overview"}),(0,a.jsx)("option",{value:"revenue",children:"Revenue"}),(0,a.jsx)("option",{value:"users",children:"Users"}),(0,a.jsx)("option",{value:"transactions",children:"Transactions"}),(0,a.jsx)("option",{value:"creators",children:"Creators"})]})]})]})})})}),D&&(0,a.jsx)(i.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,a.jsx)(i.Wu,{className:"p-4",children:(0,a.jsx)("p",{className:"text-red-600",children:D})})}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,c.vv)(e.totalRevenue)}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm ".concat(W(e.revenueGrowth)),children:[F(e.revenueGrowth),(0,a.jsxs)("span",{className:"ml-1",children:[Math.abs(e.revenueGrowth).toFixed(1),"%"]})]})]}),(0,a.jsx)(j.A,{className:"h-10 w-10 text-green-600"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Transactions"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalTransactions.toLocaleString()}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm ".concat(W(e.transactionGrowth)),children:[F(e.transactionGrowth),(0,a.jsxs)("span",{className:"ml-1",children:[Math.abs(e.transactionGrowth).toFixed(1),"%"]})]})]}),(0,a.jsx)(x.A,{className:"h-10 w-10 text-blue-600"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.totalUsers.toLocaleString()}),(0,a.jsxs)("div",{className:"mt-2 flex items-center text-sm ".concat(W(e.userGrowth)),children:[F(e.userGrowth),(0,a.jsxs)("span",{className:"ml-1",children:[Math.abs(e.userGrowth).toFixed(1),"%"]})]})]}),(0,a.jsx)(u.A,{className:"h-10 w-10 text-purple-600"})]})})}),(0,a.jsx)(i.Zp,{children:(0,a.jsx)(i.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Success Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[e.successRate.toFixed(1),"%"]}),(0,a.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["Avg: ",(0,c.vv)(e.averageTransactionAmount)]})]}),(0,a.jsx)(p.A,{className:"h-10 w-10 text-orange-600"})]})})})]}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(g,{className:"mr-2 h-5 w-5"}),"Revenue Trend"]}),(0,a.jsx)(i.BT,{children:"Daily revenue over the selected period"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"flex h-64 items-center justify-center rounded-lg bg-gray-50",children:t.length>0?(0,a.jsxs)("div",{className:"w-full",children:[(0,a.jsx)("div",{className:"mb-4 text-sm text-gray-600",children:"Revenue by Day"}),t.slice(-7).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsx)("span",{className:"text-sm",children:(0,c.Yq)(e.date)}),(0,a.jsx)("span",{className:"font-semibold",children:(0,c.vv)(e.revenue)})]},s))]}):(0,a.jsx)("p",{className:"text-gray-500",children:"No revenue data available"})})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsxs)(i.ZB,{className:"flex items-center",children:[(0,a.jsx)(N,{className:"mr-2 h-5 w-5"}),"Transaction Status"]}),(0,a.jsx)(i.BT,{children:"Breakdown of transaction statuses"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsx)("div",{className:"space-y-4",children:R.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-3 h-3 w-3 rounded-full ".concat("completed"===e.status?"bg-green-500":"pending"===e.status?"bg-yellow-500":"failed"===e.status?"bg-red-500":"bg-gray-500")}),(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:e.status})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-sm font-semibold",children:e.count}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},s))})})]})]}),(0,a.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Top Creators"}),(0,a.jsx)(i.BT,{children:"Highest earning creators this period"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[b.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-3 flex h-8 w-8 items-center justify-center rounded-full bg-indigo-100",children:(0,a.jsx)("span",{className:"text-sm font-bold text-indigo-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold",children:(0,c.vv)(e.total_earnings)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.donation_count," donations"]})]})]},e.id)),0===b.length&&(0,a.jsx)("p",{className:"py-4 text-center text-gray-500",children:"No creator data available"})]})})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Top Donors"}),(0,a.jsx)(i.BT,{children:"Most generous supporters this period"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[k.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"mr-3 flex h-8 w-8 items-center justify-center rounded-full bg-green-100",children:(0,a.jsx)("span",{className:"text-sm font-bold text-green-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.full_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-semibold",children:(0,c.vv)(e.total_donations)}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.donation_count," donations"]})]})]},e.id)),0===k.length&&(0,a.jsx)("p",{className:"py-4 text-center text-gray-500",children:"No donor data available"})]})})]})]}),(0,a.jsxs)(i.Zp,{children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Export Reports"}),(0,a.jsx)(i.BT,{children:"Download detailed reports in various formats"})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(n.$,{onClick:()=>_("revenue"),variant:"outline",className:"flex items-center justify-center",children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Revenue Report"]}),(0,a.jsxs)(n.$,{onClick:()=>_("users"),variant:"outline",className:"flex items-center justify-center",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"User Report"]}),(0,a.jsxs)(n.$,{onClick:()=>_("transactions"),variant:"outline",className:"flex items-center justify-center",children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Transaction Report"]}),(0,a.jsxs)(n.$,{onClick:()=>_("creators"),variant:"outline",className:"flex items-center justify-center",children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Creator Report"]})]})})]})]})})}},4870:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]])},5976:(e,s,t)=>{Promise.resolve().then(t.bind(t,3914))},8515:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]])},9397:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]])}},e=>{var s=s=>e(e.s=s);e.O(0,[4699,6144,8441,1684,7358],()=>s(5976)),_N_E=e.O()}]);