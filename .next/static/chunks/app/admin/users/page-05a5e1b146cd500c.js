(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8733],{311:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1177:(e,s,a)=>{"use strict";a.d(s,{Yq:()=>l,vv:()=>t});let t=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),l=e=>new Intl.DateTimeFormat("id-ID",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e))},2657:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2915:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3392:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},3909:(e,s,a)=>{Promise.resolve().then(a.bind(a,9339))},6076:(e,s,a)=>{"use strict";a.d(s,{p:()=>r});var t=a(5155);a(2115);var l=a(6629);let r=e=>{let{label:s,error:a,fullWidth:r=!1,className:i,...c}=e;return(0,t.jsxs)("div",{className:(0,l.cn)("flex flex-col space-y-1",r&&"w-full"),children:[s&&(0,t.jsx)("label",{className:"text-sm font-medium text-foreground",children:s}),(0,t.jsx)("input",{className:(0,l.cn)("input",a&&"border-destructive",r&&"w-full",i),...c}),a&&(0,t.jsx)("span",{className:"text-sm text-destructive",children:a})]})}},7924:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},9074:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(2895).A)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},9339:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>v});var t=a(5155),l=a(2115),r=a(6050),i=a(1202),c=a(4912),n=a(6076),d=a(1177),x=a(7580),o=a(2895);let m=(0,o.A)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);var h=a(9074),u=a(5525),p=a(7924),j=a(2915),g=a(311),y=a(2657);let f=(0,o.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var N=a(3392);function v(){let[e,s]=(0,l.useState)([]),[a,o]=(0,l.useState)({totalUsers:0,verifiedUsers:0,newUsersToday:0,activeUsers:0}),[v,b]=(0,l.useState)(!0),[k,w]=(0,l.useState)(""),[A,S]=(0,l.useState)(""),[C,U]=(0,l.useState)("all"),[_,z]=(0,l.useState)("all"),[T,I]=(0,l.useState)([]),[L,P]=(0,l.useState)({page:1,limit:20,total:0,totalPages:0}),B=(0,l.useCallback)(async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/v1/admin/users/stats",{headers:{Authorization:"Bearer ".concat(e)}}),a=await s.json();a.success&&o(a.data)}catch(e){}},[]),Z=(0,l.useCallback)(async()=>{try{b(!0),w("");let e=new URLSearchParams({page:L.page.toString(),limit:L.limit.toString()});A&&e.append("search",A),"all"!==C&&e.append("role",C),"all"!==_&&e.append("status",_);let a=localStorage.getItem("token"),t=await fetch("/api/v1/admin/users?".concat(e.toString()),{headers:{Authorization:"Bearer ".concat(a)}}),l=await t.json();l.success?(s(l.data),P(l.pagination),w("")):w(l.error||"Failed to load users")}catch(e){w("Failed to load users")}finally{b(!1)}},[L.page,L.limit,A,C,_]);(0,l.useEffect)(()=>{Z(),B()},[Z,B]);let q=async(e,s,a)=>{try{let t=localStorage.getItem("token"),l=await fetch("/api/v1/admin/users/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({action:s,value:a})}),r=await l.json();r.success?Z():w(r.error||"Action failed")}catch(e){w("Action failed")}},D=async e=>{if(0!==T.length)try{let s=localStorage.getItem("token"),a=await fetch("/api/v1/admin/users/bulk",{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({userIds:T,action:e})}),t=await a.json();t.success?(I([]),Z()):w(t.error||"Bulk action failed")}catch(e){w("Bulk action failed")}},F=e=>{switch(e){case"super_admin":return"bg-red-100 text-red-800";case"admin":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},M=e=>e?"text-green-600":"text-yellow-600";return v&&0===e.length?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-b-2 border-indigo-600"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading users..."})]})}):(0,t.jsx)(r.U,{activeTab:"users",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,t.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage all platform users and their permissions"})]}),(0,t.jsxs)("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-4",children:[(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(x.A,{className:"h-10 w-10 text-blue-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.totalUsers.toLocaleString()})]})]})})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(m,{className:"h-10 w-10 text-green-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Verified Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.verifiedUsers.toLocaleString()})]})]})})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(h.A,{className:"h-10 w-10 text-purple-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"New Today"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.newUsersToday.toLocaleString()})]})]})})}),(0,t.jsx)(i.Zp,{children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(u.A,{className:"h-10 w-10 text-indigo-600"}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.activeUsers.toLocaleString()})]})]})})})]}),(0,t.jsx)(i.Zp,{className:"mb-6",children:(0,t.jsx)(i.Wu,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.A,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,t.jsx)(n.p,{placeholder:"Search users...",value:A,onChange:e=>S(e.target.value),className:"w-64 pl-10"})]}),(0,t.jsxs)("select",{value:C,onChange:e=>U(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"all",children:"All Roles"}),(0,t.jsx)("option",{value:"user",children:"Users"}),(0,t.jsx)("option",{value:"admin",children:"Admins"}),(0,t.jsx)("option",{value:"super_admin",children:"Super Admins"})]}),(0,t.jsxs)("select",{value:_,onChange:e=>z(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 focus:border-indigo-500 focus:ring-indigo-500",children:[(0,t.jsx)("option",{value:"all",children:"All Status"}),(0,t.jsx)("option",{value:"verified",children:"Verified"}),(0,t.jsx)("option",{value:"unverified",children:"Unverified"})]})]}),T.length>0&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(c.$,{onClick:()=>D("verify"),variant:"outline",size:"sm",children:[(0,t.jsx)(j.A,{className:"mr-2 h-4 w-4"}),"Verify Selected"]}),(0,t.jsxs)(c.$,{onClick:()=>D("unverify"),variant:"outline",size:"sm",children:[(0,t.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"Unverify Selected"]})]})]})})}),k&&(0,t.jsx)(i.Zp,{className:"mb-6 border-red-200 bg-red-50",children:(0,t.jsx)(i.Wu,{className:"p-4",children:(0,t.jsx)("p",{className:"text-red-600",children:k})})}),(0,t.jsxs)(i.Zp,{children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{children:["All Users (",L.total,")"]}),(0,t.jsxs)(i.BT,{children:["Showing ",e.length," of ",L.total," users"]})]}),(0,t.jsxs)(i.Wu,{children:[(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b",children:[(0,t.jsx)("th",{className:"p-4 text-left",children:(0,t.jsx)("input",{type:"checkbox",checked:T.length===e.length&&e.length>0,onChange:s=>{s.target.checked?I(e.map(e=>e.id)):I([])},className:"rounded border-gray-300"})}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"User"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Role"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Status"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Balance"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Last Login"}),(0,t.jsx)("th",{className:"p-4 text-left font-medium text-gray-900",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:e.map(e=>(0,t.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("input",{type:"checkbox",checked:T.includes(e.id),onChange:s=>{s.target.checked?I([...T,e.id]):I(T.filter(s=>s!==e.id))},className:"rounded border-gray-300"})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("img",{src:e.avatar||"/default-avatar.png",alt:e.full_name,className:"mr-3 h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name}),(0,t.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.username]}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("span",{className:"inline-flex rounded-full px-2 py-1 text-xs font-semibold ".concat(F(e.role)),children:e.role.replace("_"," ").toUpperCase()})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[e.is_verified?(0,t.jsx)(j.A,{className:"mr-1 h-4 w-4 ".concat(M(!0))}):(0,t.jsx)(g.A,{className:"mr-1 h-4 w-4 ".concat(M(!1))}),(0,t.jsx)("span",{className:M(e.is_verified),children:e.is_verified?"Verified":"Unverified"})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsx)("p",{className:"font-medium",children:(0,d.vv)(e.balance)}),(0,t.jsxs)("p",{className:"text-gray-500",children:["Earned: ",(0,d.vv)(e.total_earnings)]})]})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsx)("div",{className:"text-sm",children:e.last_login?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:(0,d.Yq)(e.last_login)}),(0,t.jsx)("p",{className:"text-gray-500",children:new Date(e.last_login).toLocaleTimeString()})]}):(0,t.jsx)("span",{className:"text-gray-500",children:"Never"})})}),(0,t.jsx)("td",{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>window.open("/profile/".concat(e.username),"_blank"),children:(0,t.jsx)(y.A,{className:"h-4 w-4"})}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>q(e.id,"toggle_verification"),children:e.is_verified?(0,t.jsx)(f,{className:"h-4 w-4"}):(0,t.jsx)(m,{className:"h-4 w-4"})}),(0,t.jsx)(c.$,{size:"sm",variant:"outline",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]})})]},e.id))})]})}),L.totalPages>1&&(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Page ",L.page," of ",L.totalPages]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.$,{variant:"outline",disabled:L.page<=1,onClick:()=>P(e=>({...e,page:e.page-1})),children:"Previous"}),(0,t.jsx)(c.$,{variant:"outline",disabled:L.page>=L.totalPages,onClick:()=>P(e=>({...e,page:e.page+1})),children:"Next"})]})]})]})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[4699,6144,8441,1684,7358],()=>s(3909)),_N_E=e.O()}]);