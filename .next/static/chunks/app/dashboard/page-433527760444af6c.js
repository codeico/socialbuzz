(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{238:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]])},1539:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]])},2657:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3109:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},4111:(e,s,t)=>{Promise.resolve().then(t.bind(t,7107))},4738:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]])},5868:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(2895).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7107:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(5155),l=t(2115),n=t(5695),i=t(962),r=t(1202),c=t(4912),d=t(4236),o=t(1116),x=t(1177),h=t(5868),m=t(3109),u=t(238),j=t(4870);let y=(0,t(2895).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var p=t(4738),f=t(1539),g=t(2657),v=t(8515);function N(){let[e,s]=(0,l.useState)("overview"),{user:t,loading:N}=(0,d.A)(),{getTransactions:w,getDonations:b,loading:k}=(0,o.u)(),[A,E]=(0,l.useState)({balance:0,totalEarnings:0,totalDonations:0,monthlyEarnings:0}),[Z,_]=(0,l.useState)([]),[B,C]=(0,l.useState)([]),M=(0,n.useRouter)(),R=(0,l.useCallback)(async()=>{try{let e=localStorage.getItem("token"),s=await fetch("/api/v1/users/me",{headers:{Authorization:"Bearer ".concat(e)}}),t=await s.json();t.success&&E({balance:t.data.balance||0,totalEarnings:t.data.total_earnings||0,totalDonations:t.data.total_donations||0,monthlyEarnings:0})}catch(e){console.error("Error loading user data:",e)}},[]),S=(0,l.useCallback)(async()=>{try{let[e,s]=await Promise.all([w({limit:5,sortBy:"created_at",sortOrder:"desc"}),b({limit:5,sortBy:"created_at",sortOrder:"desc"})]);_((null==e?void 0:e.data)||[]),C((null==s?void 0:s.data)||[])}catch(e){_([]),C([])}},[w,b]);return(0,l.useEffect)(()=>{N||t||M.push("/auth/login")},[t,N,M]),(0,l.useEffect)(()=>{t&&(R(),S())},[t,R,S]),N?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your dashboard..."})]})}):t?(0,a.jsx)(i.N,{activeTab:e,onTabChange:s,children:(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Welcome back, ",null==t?void 0:t.fullName,"!"]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Here's what's happening with your account today."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Available Balance"}),(0,a.jsx)(h.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(0,x.vv)(A.balance)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ready for withdrawal"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Total Earnings"}),(0,a.jsx)(m.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(0,x.vv)(A.totalEarnings)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"All time earnings"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"Total Donations"}),(0,a.jsx)(u.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(0,x.vv)(A.totalDonations)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Amount you've donated"})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ZB,{className:"text-sm font-medium",children:"This Month"}),(0,a.jsx)(j.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(r.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(0,x.vv)(A.monthlyEarnings)}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Monthly earnings"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Quick Actions"}),(0,a.jsx)(r.BT,{children:"Common actions you can take"})]}),(0,a.jsxs)(r.Wu,{className:"space-y-3",children:[(0,a.jsxs)(c.$,{className:"w-full justify-start",variant:"outline",onClick:()=>{alert("Payout request feature will be implemented")},children:[(0,a.jsx)(y,{className:"mr-2 h-4 w-4"}),"Request Payout"]}),(0,a.jsxs)(c.$,{className:"w-full justify-start",variant:"outline",onClick:()=>window.open("/obs/".concat(null==t?void 0:t.id,"/settings"),"_blank"),children:[(0,a.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"OBS Setup"]}),(0,a.jsxs)(c.$,{className:"w-full justify-start",variant:"outline",onClick:()=>window.open("/widget/".concat(null==t?void 0:t.id),"_blank"),children:[(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Donation Widget"]}),(0,a.jsxs)(c.$,{className:"w-full justify-start",variant:"outline",onClick:()=>window.open("/profile/".concat(null==t?void 0:t.username),"_blank"),children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4"}),"View Profile"]})]})]}),(0,a.jsxs)(r.Zp,{children:[(0,a.jsxs)(r.aR,{children:[(0,a.jsx)(r.ZB,{children:"Recent Activity"}),(0,a.jsx)(r.BT,{children:"Your latest transactions"})]}),(0,a.jsx)(r.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:Z.length>0?Z.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:["donation"===e.type?(0,a.jsx)(v.A,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(j.A,{className:"h-4 w-4 text-red-500"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.description}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(0,x.Yq)(e.created_at)})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"text-sm font-medium ".concat("donation"===e.type?"text-green-600":"text-red-600"),children:["donation"===e.type?"+":"-",(0,x.vv)(e.amount)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:e.status})]})]},e.id)):(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"No recent transactions"})})})]})]})]})})}):null}}},e=>{var s=s=>e(e.s=s);e.O(0,[4699,6317,8441,1684,7358],()=>s(4111)),_N_E=e.O()}]);